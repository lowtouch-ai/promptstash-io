(()=>{const e=[{name:"Business Analyst Report",tags:"analysis, report, business",type:"pre-built",content:"# Your Role\nBusiness Analyst\n\n# Your Task\nAnalyze the provided data and generate a concise report.\n\n# Relevant Background Information\nUse formal tone, focus on key metrics.\n\n# Output Format\nExecutive summary (200 words), followed by bullet points."},{name:"Code Debugging Assistant",tags:"coding, debug, tech",type:"pre-built",content:"# Your Role\nSenior Developer\n\n# Your Task\nIdentify and fix bugs in the provided code snippet.\n\n# Relevant Background Information\nCode is in Python, prioritize efficiency.\n\n# Output Format\nExplanation of issue, corrected code block."},{name:"Content Generator",tags:"marketing, content, quick",type:"pre-built",content:"# Your Role\nContent Writer\n\n# Your Task\nWrite a 500-word blog post on the given topic.\n\n# Relevant Background Information\nCasual tone, SEO-friendly.\n\n# Output Format\nTitle, intro, 3 sections, conclusion."}];document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("searchBox"),n=document.getElementById("typeSelect"),a=document.getElementById("dropdownResults"),o=document.getElementById("templateName"),s=document.getElementById("templateTags"),l=document.getElementById("promptArea"),r=document.getElementById("fetchBtn"),c=document.getElementById("saveBtn"),m=document.getElementById("saveAsBtn"),i=document.getElementById("deleteBtn"),d=document.getElementById("clearBtn"),u=document.getElementById("sendBtn");let p=null;function v(n,r=""){chrome.storage.sync.get(["templates"],(c=>{const m=c.templates||e;a.innerHTML="";let i=m.filter((e=>"all"===n||e.type===n));r&&(i=i.filter((e=>e.name.toLowerCase().includes(r)||e.tags.toLowerCase().includes(r))),i.sort(((e,t)=>{const n=e.name.toLowerCase().indexOf(r)+e.tags.toLowerCase().indexOf(r),a=t.name.toLowerCase().indexOf(r)+t.tags.toLowerCase().indexOf(r);return n!==a?n-a:e.name.localeCompare(t.name)}))),i.forEach(((e,n)=>{const r=document.createElement("div");r.textContent=`${e.name} (${e.tags})`,r.addEventListener("click",(()=>{p=m.indexOf(e),o.value=e.name,s.value=e.tags,l.value=e.content,t.value=e.name,a.innerHTML=""})),a.appendChild(r)}))}))}t.addEventListener("click",(()=>{const e=t.value.toLowerCase();v(n.value,e)})),t.addEventListener("input",(()=>{const e=t.value.toLowerCase();v(n.value,e)})),n.addEventListener("change",(()=>{v(n.value,t.value.toLowerCase())})),document.addEventListener("click",(e=>{t.contains(e.target)||a.contains(e.target)||(a.innerHTML="")})),c.addEventListener("click",(()=>{null!==p?confirm("Are you sure you want to overwrite the existing template?")&&chrome.storage.sync.get(["templates"],(t=>{const a=t.templates||e;a[p]={name:o.value,tags:s.value,content:l.value,type:a[p].type||"custom"},chrome.storage.sync.set({templates:a},(()=>{alert("Template saved successfully."),v(n.value)}))})):alert("Please select a template to save changes.")})),m.addEventListener("click",(()=>{let t=o.value.trim(),a=s.value.trim();if(!t||!a){if(t||(t=prompt("Please provide a template name:")),a||(a=prompt("Please provide tags (comma-separated):")||""),!t)return;o.value=t,s.value=a}chrome.storage.sync.get(["templates"],(s=>{const r=s.templates||e;if(r.some((e=>e.name===t))){if(t=prompt("Template name already exists. Please provide a new name:"),!t)return;o.value=t}confirm(`Save as new template "${t}"?`)&&(r.push({name:t,tags:a,content:l.value,type:"custom"}),chrome.storage.sync.set({templates:r},(()=>{alert("Template saved successfully."),v(n.value)})))}))})),r.addEventListener("click",(()=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{chrome.tabs.sendMessage(e[0].id,{action:"getPrompt"},(e=>{e&&e.prompt&&(l.value=e.prompt)}))}))})),u.addEventListener("click",(()=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{chrome.tabs.sendMessage(e[0].id,{action:"sendPrompt",prompt:l.value})}))})),i.addEventListener("click",(()=>{null!==p?confirm("Are you sure you want to delete this template?")&&chrome.storage.sync.get(["templates"],(a=>{const r=a.templates||e;r.splice(p,1),chrome.storage.sync.set({templates:r},(()=>{alert("Template deleted successfully."),p=null,o.value="",s.value="",l.value="",t.value="",v(n.value)}))})):alert("Please select a template to delete.")})),d.addEventListener("click",(()=>{l.value=""})),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((e=>new bootstrap.Tooltip(e,{delay:{show:500,hide:100}})))}))})();