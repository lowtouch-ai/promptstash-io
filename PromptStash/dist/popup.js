(()=>{"use strict";const e=[{name:"Business Analyst Report",tags:"analysis, report, business",type:"pre-built",content:"# Your Role\nBusiness Analyst\n\n# Your Task\nAnalyze the provided data and generate a concise report.\n\n# Relevant Background Information\nUse formal tone, focus on key metrics.\n\n# Output Format\nExecutive summary (200 words), followed by bullet points.",favorite:!1},{name:"Code Debugging Assistant",tags:"coding, debug, tech",type:"pre-built",content:"# Your Role\nSenior Developer\n\n# Your Task\nIdentify and fix bugs in the provided code snippet.\n\n# Relevant Background Information\nCode is in Python, prioritize efficiency.\n\n# Output Format\nExplanation of issue, corrected code block.",favorite:!1},{name:"Content Generator",tags:"marketing, content, quick",type:"pre-built",content:"# Your Role\nContent Writer\n\n# Your Task\nWrite a 500-word blog post on the given topic.\n\n# Relevant Background Information\nCasual tone, SEO-friendly.\n\n# Output Format\nTitle, intro, 3 sections, conclusion.",favorite:!1}],t="1.0.0";function a(e,t){let a;return function(...n){clearTimeout(a),a=setTimeout((()=>e.apply(this,n)),t)}}let n=[],s=!1;document.addEventListener("DOMContentLoaded",(()=>{const o={searchBox:document.getElementById("searchBox"),typeSelect:document.getElementById("typeSelect"),dropdownResults:document.getElementById("dropdownResults"),template:document.getElementById("template"),templateName:document.getElementById("templateName"),templateTags:document.getElementById("templateTags"),promptArea:document.getElementById("promptArea"),buttons:document.getElementById("buttons"),fetchBtns:document.querySelectorAll("#fetchBtn, #fetchBtn2"),fetchBtn2:document.getElementById("fetchBtn2"),saveBtn:document.getElementById("saveBtn"),saveAsBtn:document.getElementById("saveAsBtn"),deleteBtn:document.getElementById("deleteBtn"),clearSearch:document.getElementById("clearSearch"),clearPrompt:document.getElementById("clearPrompt"),clearAllBtn:document.getElementById("clearAllBtn"),sendBtn:document.getElementById("sendBtn"),favoriteSuggestions:document.getElementById("favoriteSuggestions"),fullscreenToggle:document.getElementById("fullscreenToggle"),closeBtn:document.getElementById("closeBtn"),minimizeBtn:document.getElementById("minimizeBtn"),newBtn:document.getElementById("newBtn"),overlay:document.getElementById("overlay"),toast:document.getElementById("toast"),themeToggle:document.getElementById("themeToggle")},l=Object.entries(o).filter((([e,t])=>!t)).map((([e])=>e));l.length>0?(console.error("Missing DOM elements:",l),y("Error: Extension UI failed to load. Please reload the extension.",3e3,"red")):console.log("All DOM elements found:",Object.keys(o));let r,c,i=null,m="light",d=null,p=0,u=!1,g=[];function v(){const e={popupState:{name:o.templateName.value,tags:o.templateTags.value,content:o.promptArea.value,selectedName:i},theme:m,isFullscreen:u,extensionVersion:t};chrome.storage.local.set(e)}function f(){chrome.storage.sync.set({nextIndex:p})}function h(){d={name:o.templateName.value,tags:o.templateTags.value,content:o.promptArea.value,selectedName:i,templates:null}}function y(e,t=4e3,a="red",o=[]){n.push({message:e,duration:t,type:a,buttons:o}),s||E()}function E(){if(0===n.length)return void(s=!1);s=!0;const{message:e,duration:t,type:a,buttons:l}=n.shift();o.toast.innerHTML=e;const r=document.createElement("button");if(r.textContent="×",r.className="toast-close-btn",r.setAttribute("aria-label","Close toast"),r.addEventListener("click",(()=>{o.toast.classList.remove("show"),o.toast.classList.add("hide"),setTimeout((()=>{o.toast.classList.remove("hide"),o.toast.innerHTML="",s=!1,E()}),300)})),o.toast.appendChild(r),l.length>0){const e=document.createElement("div");e.className="toast-button-container",l.forEach((({text:t,callback:a})=>{const n=document.createElement("button");n.textContent=t,n.className="toast-action-btn",n.setAttribute("aria-label","Yes"===t?"Confirm action":"Cancel action"),n.addEventListener("click",(()=>{o.toast.classList.remove("show"),o.toast.classList.add("hide"),setTimeout((()=>{o.toast.classList.remove("hide"),o.toast.innerHTML="",s=!1,E(),a()}),300)})),e.appendChild(n)})),o.toast.appendChild(e);const t=e=>{o.toast.contains(e.target)||(o.toast.classList.remove("show"),o.toast.classList.add("hide"),setTimeout((()=>{o.toast.classList.remove("hide"),o.toast.innerHTML="",s=!1,E();const e=l.find((e=>"No"===e.text));e&&e.callback&&e.callback()}),300),document.removeEventListener("click",t))};setTimeout((()=>{document.addEventListener("click",t)}),0)}else setTimeout((()=>{o.toast.classList.remove("show"),o.toast.classList.add("hide"),setTimeout((()=>{o.toast.classList.remove("hide"),o.toast.innerHTML="",s=!1,E()}),300)}),t);o.toast.className=`toast ${a} ${l.length>0?"confirmation":""}`,o.toast.classList.add("show")}function T(e,t,a=!1){const n=e.trim();if(!n)return y("Template name is required.",3e3,"red"),{isValid:!1,sanitizedName:null};if(n.length>50)return y("Template name must be 50 characters or less.",3e3,"red"),{isValid:!1,sanitizedName:null};const s=n.replace(/[^a-zA-Z0-9\s]/g,"");return s!==n?(y("Template name can only contain letters, numbers, and spaces.",3e3,"red"),{isValid:!1,sanitizedName:null}):t.some((e=>e.name===s&&(a||e.name!==i)))?(y("Template name must be unique.",3e3,"red"),{isValid:!1,sanitizedName:null}):{isValid:!0,sanitizedName:s}}function b(e){if(!e)return"";const t=e.split(",").map((e=>e.trim())).filter((e=>e));if(t.length>5)return y("Maximum of 5 tags allowed per template.",3e3,"red"),null;const a=t.map((e=>e.replace(/[^a-zA-Z0-9]/g,"").slice(0,20)));return a.some((e=>0===e.length))?(y("Each tag must contain only letters or numbers and be 20 characters or less.",3e3,"red"),null):a.join(", ")}function B(e){if(!e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}function x(e){g.unshift(e),g=[...new Set(g)],g.length>10&&(g=g.slice(0,10)),chrome.storage.sync.set({recentIndices:g},(()=>{chrome.runtime.lastError&&console.error("Failed to save recent indices:",chrome.runtime.lastError.message)}))}function L(e){const t=setTimeout((()=>{y("Error: No response from tab. Please activate a supported webpage.",3e3,"red"),e(null)}),5e3);chrome.runtime.sendMessage({action:"getTargetTabId"},(a=>{clearTimeout(t),a&&a.tabId?e(a.tabId):(y("Error: No valid tab selected. Please activate a supported webpage.",3e3,"red"),e(null))}))}function k(t,a="",n=!1){chrome.storage.sync.get(["templates"],(s=>{console.log(s);let l=s.templates||e.map(((e,t)=>({...e,index:t})));o.dropdownResults.innerHTML="",o.favoriteSuggestions.innerHTML="";let r=l.filter((e=>"all"===t||e.type===t));a?(r=r.filter((e=>e.name.toLowerCase().includes(a)||e.tags.toLowerCase().includes(a))),r.sort(((e,t)=>{const n=e.name.toLowerCase().indexOf(a)+e.tags.toLowerCase().indexOf(a),s=t.name.toLowerCase().indexOf(a)+t.tags.toLowerCase().indexOf(a);return n!==s?n-s:e.name.localeCompare(t.name)}))):r.sort(((e,t)=>{const a=g.indexOf(e.index),n=g.indexOf(t.index);return-1===a&&-1===n?e.name.localeCompare(t.name):-1===a?1:-1===n?-1:a-n})),n&&r.forEach(((e,t)=>{const a=document.createElement("div");a.textContent=(e.favorite,`${e.name} (${e.tags})`),a.setAttribute("role","option"),a.setAttribute("aria-selected",i===e.name),o.overlay.style.display="block",o.dropdownResults.style.display="block",o.dropdownResults.classList.add("show"),a.addEventListener("click",(t=>{t.target.classList.contains("favorite-toggle")||(i=e.name,o.templateName.value=e.name,o.templateTags.value=e.tags,o.promptArea.value=e.content,o.searchBox.value="",o.dropdownResults.innerHTML="",o.fetchBtn2.style.display=e.content?"none":"block",o.overlay.style.display="none",o.dropdownResults.style.display="none",o.dropdownResults.classList.remove("show"),v(),o.promptArea.focus())})),a.innerHTML+=`<button class="favorite-toggle ${e.favorite?"favorited":"unfavorited"}" data-name="${e.name}" aria-label="${e.favorite?"Unfavorite":"Favorite"} template">${e.favorite?"★":"☆"}</button>`,o.dropdownResults.appendChild(a)}));const c=l.filter((e=>e.favorite));c.length>0?(c.sort(((e,t)=>{const a=g.indexOf(e.index),n=g.indexOf(t.index);return-1===a&&-1===n?e.name.localeCompare(t.name):-1===a?1:-1===n?-1:a-n})),o.favoriteSuggestions.classList.remove("d-none"),c.forEach((e=>{const t=document.createElement("span");t.textContent=e.name,t.className="favorite-suggestion",t.setAttribute("role","button"),t.setAttribute("tabindex","0"),t.addEventListener("click",(()=>{i=e.name,o.templateName.value=e.name,o.templateTags.value=e.tags,o.promptArea.value=e.content,o.searchBox.value="",o.fetchBtn2.style.display=e.content?"none":"block",v(),o.promptArea.focus()})),t.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||t.click()})),o.favoriteSuggestions.appendChild(t)}))):o.favoriteSuggestions.classList.add("d-none")}))}function A(e,t,a=!1){!function(e){chrome.storage.sync.get(null,(t=>{const a=JSON.stringify(t);(new TextEncoder).encode(a).length>92160&&y("Warning: Storage is nearly full (90% of 100KB limit). Please delete unused templates.",5e3,"red"),e()}))}((()=>{chrome.storage.sync.set({templates:e},(()=>{if(chrome.runtime.lastError){const e=chrome.runtime.lastError.message;e.includes("QUOTA_BYTES_PER_ITEM")?y("Template size exceeds 8KB limit. Please reduce the size.",3e3,"red"):e.includes("QUOTA_BYTES")?y("Total storage limit (100KB) exceeded. Please delete unused templates.",3e3,"red"):y("Failed to save template: "+e,3e3,"red"),console.error("Sync storage error:",e)}else y(a?"Template saved. Press Ctrl+Z to undo.":"Template updated. Press Ctrl+Z to undo.",3e3,"green"),t()}))}))}function w(t,a){chrome.storage.sync.get(["templates"],(n=>{let s=n.templates||e.map(((e,t)=>({...e,index:t})));h(),d.templates=[...s];const l={name:t,tags:a,content:B(o.promptArea.value),type:"custom",favorite:!1,index:p};s.push(l),x(p),p++,A(s,(()=>{i=t,o.templateName.value=t,k(o.typeSelect.value,"",!1),v(),f()}),!0)}))}chrome.storage.local.get(["popupState","theme","extensionVersion"],(a=>{chrome.storage.sync.get(["recentIndices","templates","nextIndex"],(n=>{const s=a.extensionVersion||"0.0.0";s!==t&&(console.log(`Version updated from ${s} to ${t}. No schema migration needed.`),chrome.storage.local.set({extensionVersion:t}));const l=a.popupState||{};o.templateName.value=l.name||"",o.templateTags.value=l.tags||"",o.promptArea.value=l.content||"",i=l.selectedName||null,m=a.theme||"light",p=n.nextIndex||e.length,g=n.recentIndices||[];const r=n.templates||e.map(((e,t)=>({...e,index:t})));n.templates||chrome.storage.sync.set({templates:r}),document.body.className=m,o.fetchBtn2.style.display=o.promptArea.value?"none":"block",k(o.typeSelect.value,"",!1)}))})),new ResizeObserver((()=>{clearTimeout(r),r=setTimeout((()=>{const e=document.body.clientWidth,t=Math.min(Math.max(e/20,14),24);document.documentElement.style.setProperty("--base-font-size",`${t}px`)}),100)})).observe(document.body),o.templateName.addEventListener("input",a((()=>{let e=o.templateName.value;e.length>50&&(e=e.slice(0,50),o.templateName.value=e);const t=e.replace(/[^a-zA-Z0-9\s]/g,"");t!==e&&(o.templateName.value=t,y("Template name can only contain letters, numbers, and spaces.",3e3,"red")),v()}),10)),o.templateTags.addEventListener("input",a((()=>{h();let e=o.templateTags.value;if(e){e=e.replace(/^[,\s]+/g,""),e=e.replace(/,[,\s]*/g,", "),e=e.replace(/\s+/g," ");const t=e.split(", ").map((e=>e.replace(/[^a-zA-Z0-9]/g,"").slice(0,20)));t.length>5&&(y("Maximum of 5 tags allowed per template.",3e3,"red"),t.length=5),e=t.join(", "),o.templateTags.value=e}const t=o.templateTags.selectionStart;" "===e[t]&&","===e[t-1]&&(o.templateTags.selectionStart=o.templateTags.selectionEnd=t-1),v()}),10)),o.themeToggle.addEventListener("click",(()=>{m="light"===m?"dark":"light",document.body.className=m,v()})),o.fullscreenToggle.addEventListener("click",(()=>{o.fullscreenToggle.querySelector("svg use").setAttribute("href",u?"sprite.svg#compress":"sprite.svg#fullscreen"),u=!u,v(),chrome.runtime.sendMessage({action:"toggleFullscreen"})})),o.minimizeBtn.addEventListener("click",(()=>{chrome.runtime.sendMessage({action:"closePopup"})})),o.closeBtn.addEventListener("click",(()=>{o.templateName.value="",o.templateTags.value="",o.promptArea.value="",i=null,o.fetchBtn2.style.display="block",o.searchBox.value="",k(o.typeSelect.value,"",!1),v(),chrome.runtime.sendMessage({action:"closePopup"})})),o.newBtn.addEventListener("click",(()=>{h(),o.templateName.value="",o.templateTags.value="",o.promptArea.value="",i=null,o.fetchBtn2.style.display="block",o.searchBox.value="",k(o.typeSelect.value,"",!1),v(),y("New template created.",3e3,"green")})),o.clearSearch.addEventListener("click",(()=>{o.searchBox.value="",k(o.typeSelect.value,"",!1),o.searchBox.focus()})),o.clearPrompt.addEventListener("click",(()=>{h(),o.promptArea.value="",o.fetchBtn2.style.display="block",o.promptArea.focus(),v()})),o.clearAllBtn.addEventListener("click",(()=>{h(),o.templateName.value="",o.templateTags.value="",o.promptArea.value="",i=null,o.fetchBtn2.style.display="block",o.searchBox.value="",k(o.typeSelect.value,"",!1),v(),y("All fields cleared.",3e3,"green")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&chrome.runtime.sendMessage({action:"closePopup"})})),o.promptArea.addEventListener("keydown",(e=>{if("Tab"===e.key){e.preventDefault();const t=o.promptArea.selectionStart,a=o.promptArea.selectionEnd,n=o.promptArea.value;o.promptArea.value=n.substring(0,t)+"  "+n.substring(a),o.promptArea.selectionStart=o.promptArea.selectionEnd=t+2,v()}})),o.promptArea.addEventListener("input",(()=>{h(),o.promptArea.value=B(o.promptArea.value),o.fetchBtn2.style.display=o.promptArea.value?"none":"block",v()})),o.templateTags.addEventListener("keydown",(e=>{const t=o.templateTags.selectionStart,a=o.templateTags.value;return"Backspace"===e.key&&t>0&&" "===a[t-1]&&","===a[t-2]?(e.preventDefault(),o.templateTags.value=a.slice(0,t-2)+a.slice(t),o.templateTags.selectionStart=o.templateTags.selectionEnd=t-2,h(),void v()):"Delete"===e.key&&t<a.length&&","===a[t]&&" "===a[t+1]?(e.preventDefault(),o.templateTags.value=a.slice(0,t)+a.slice(t+2),o.templateTags.selectionStart=o.templateTags.selectionEnd=t,h(),void v()):"ArrowLeft"===e.key&&t>1&&" "===a[t-1]&&","===a[t-2]?(e.preventDefault(),void(o.templateTags.selectionStart=o.templateTags.selectionEnd=t-2)):"ArrowRight"===e.key&&t<a.length-1&&","===a[t]&&" "===a[t+1]?(e.preventDefault(),void(o.templateTags.selectionStart=o.templateTags.selectionEnd=t+2)):void 0})),o.templateTags.addEventListener("click",(()=>{const e=o.templateTags.selectionStart,t=o.templateTags.value;e>0&&" "===t[e]&&","===t[e-1]&&(o.templateTags.selectionStart=o.templateTags.selectionEnd=e-1)})),o.searchBox.addEventListener("focus",(()=>{k(o.typeSelect.value,o.searchBox.value.toLowerCase(),!0)})),o.searchBox.addEventListener("input",(()=>{k(o.typeSelect.value,o.searchBox.value.toLowerCase(),!0)})),o.typeSelect.addEventListener("change",(()=>{k(o.typeSelect.value,o.searchBox.value.toLowerCase(),!0)})),document.addEventListener("click",(e=>{o.searchBox.contains(e.target)||o.dropdownResults.contains(e.target)||o.themeToggle.contains(e.target)||o.typeSelect.contains(e.target)||(o.dropdownResults.innerHTML="",o.overlay.style.display="none",o.dropdownResults.style.display="none",o.dropdownResults.classList.remove("show"))})),o.saveBtn.addEventListener("click",(()=>{chrome.storage.sync.get(["templates"],(t=>{let a=t.templates||e.map(((e,t)=>({...e,index:t})));const n=T(o.templateName.value,a);if(!n.isValid)return void o.templateName.focus();const s=n.sanitizedName,l=o.templateTags.value,r=b(l);if(null===r)return void o.templateTags.focus();const c=B(o.promptArea.value);if(!c.trim())return y("Prompt content is required to save a template.",3e3,"red"),void o.promptArea.focus();if(!l.trim())return o.templateTags.focus(),void y("No tags provided. Save without tags?",0,"red",[{text:"Yes",callback:()=>{if(i){const e=a.find((e=>e.name===i));if(!e)return void y("Selected template not found.",3e3,"red");if(o.templateName.value===e.name&&b(o.templateTags.value)===e.tags&&o.promptArea.value===e.content)return void y("No changes to save.",3e3,"red");h(),d.templates=[...a];const t=a.findIndex((e=>e.name===i));a[t]={name:s,tags:r,content:c,type:"custom",favorite:e.favorite||!1,index:e.index},A(a,(()=>{i=s,k(o.typeSelect.value,"",!1),v()}))}else{h(),d.templates=[...a];const e={name:s,tags:r,content:c,type:"custom",favorite:!1,index:p};a.push(e),x(p),p++,A(a,(()=>{i=s,k(o.typeSelect.value,"",!1),v(),f()}),!0)}}},{text:"No",callback:()=>{o.templateTags.focus()}}]);if(i){const e=a.find((e=>e.name===i));if(!e)return void y("Selected template not found.",3e3,"red");if(o.templateName.value===e.name&&b(o.templateTags.value)===e.tags&&o.promptArea.value===e.content)return void y("No changes to save.",3e3,"red");h(),d.templates=[...a];const t=a.findIndex((e=>e.name===i));a[t]={name:s,tags:r,content:c,type:"custom",favorite:e.favorite||!1,index:e.index},A(a,(()=>{i=s,k(o.typeSelect.value,"",!1),v()}))}else{h(),d.templates=[...a];const e={name:s,tags:r,content:c,type:"custom",favorite:!1,index:p};a.push(e),x(p),p++,A(a,(()=>{i=s,k(o.typeSelect.value,"",!1),v(),f()}),!0)}}))})),o.saveAsBtn.addEventListener("click",(()=>{chrome.storage.sync.get(["templates"],(t=>{const a=t.templates||e.map(((e,t)=>({...e,index:t}))),n=T(o.templateName.value,a,!0);if(!n.isValid)return void o.templateName.focus();const s=n.sanitizedName,l=o.templateTags.value,r=b(l);if(null!==r)return B(o.promptArea.value).trim()?l.trim()?void w(s,r):(o.templateTags.focus(),void y("No tags provided. Save without tags?",0,"red",[{text:"Yes",callback:()=>{w(s,r)}},{text:"No",callback:()=>{o.templateTags.focus()}}])):(y("Prompt content is required to save a template.",3e3,"red"),void o.promptArea.focus());o.templateTags.focus()}))})),o.fetchBtns.forEach((e=>{e.addEventListener("click",(()=>{L((e=>{e?chrome.tabs.sendMessage(e,{action:"getPrompt"},(e=>{if(chrome.runtime.lastError)return console.error("Fetch error:",chrome.runtime.lastError.message),void y("Failed to fetch prompt. Please refresh the page.",3e3,"red");e&&e.prompt?(h(),o.promptArea.value=B(e.prompt),o.fetchBtn2.style.display="none",v()):y("No input found on the page.",3e3,"red")})):y("Error: No valid tab selected. Please activate a supported webpage.",3e3,"red")}))}))})),o.sendBtn.addEventListener("click",(()=>{L((t=>{t?chrome.tabs.sendMessage(t,{action:"sendPrompt",prompt:B(o.promptArea.value)},(t=>{if(chrome.runtime.lastError)return console.error("Send error:",chrome.runtime.lastError.message),void y("Failed to send prompt. Please refresh the page.",3e3,"red");t&&t.success?i?chrome.storage.sync.get(["templates"],(t=>{const a=(t.templates||e.map(((e,t)=>({...e,index:t})))).find((e=>e.name===i));a&&x(a.index),chrome.runtime.sendMessage({action:"closePopup"})})):chrome.runtime.sendMessage({action:"closePopup"}):y("Failed to send prompt. Please refresh the page.",3e3,"red")})):y("Error: No valid tab selected. Please activate a supported webpage.",3e3,"red")}))})),o.deleteBtn.addEventListener("click",(()=>{i?chrome.storage.sync.get(["templates","recentIndices"],(t=>{const a=t.templates||e.map(((e,t)=>({...e,index:t}))),n="pre-built"===a.find((e=>e.name===i)).type;y(`Are you sure you want to delete "${i}"?${n?"<br>This is a pre-built template.":""}`,0,"red",[{text:"Yes",callback:()=>{h(),d.templates=[...a];const e=a.findIndex((e=>e.name===i)),t=a[e].index;a.splice(e,1),g=g.filter((e=>e!==t)),chrome.storage.sync.set({templates:a,recentIndices:g},(()=>{chrome.runtime.lastError?y("Failed to delete template: "+chrome.runtime.lastError.message,3e3,"red"):(y("Template deleted successfully. Press Ctrl+Z to undo.",3e3,"green"),i=null,o.templateName.value="",o.templateTags.value="",o.promptArea.value="",o.searchBox.value="",o.fetchBtn2.style.display="block",k(o.typeSelect.value,"",!1),v())}))}},{text:"No",callback:()=>{}}])})):y("Please select a template to delete.",3e3,"red")})),document.addEventListener("keydown",(e=>{e.ctrlKey&&"z"===e.key&&d&&(o.templateName.value=d.name||"",o.templateTags.value=d.tags||"",o.promptArea.value=d.content||"",i=d.selectedName||null,d.templates&&chrome.storage.sync.set({templates:d.templates},(()=>{k(o.typeSelect.value,"",!1)})),o.fetchBtn2.style.display=o.promptArea.value?"none":"block",y("Action undone successfully.",3e3,"green"),d=null,v())})),document.addEventListener("click",(t=>{if(t.target.classList.contains("favorite-toggle")){const a=t.target.dataset.name;chrome.storage.sync.get(["templates"],(t=>{const n=t.templates||e.map(((e,t)=>({...e,index:t}))),s=n.find((e=>e.name===a));if(s){if(!s.favorite&&n.filter((e=>e.favorite)).length>=10)return void y("Maximum of 10 favorite templates allowed.",3e3,"red");s.favorite=!s.favorite,chrome.storage.sync.set({templates:n},(()=>{k(o.typeSelect.value,o.searchBox.value.toLowerCase(),!0)}))}}))}})),document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach((e=>new bootstrap.Tooltip(e,{delay:{show:500,hide:50}}))),o.dropdownResults.addEventListener("keydown",(e=>{const t=o.dropdownResults.querySelectorAll("div"),a=document.activeElement;let n=Array.from(t).indexOf(a);"ArrowDown"===e.key?(e.preventDefault(),n=(n+1)%t.length,t[n].focus()):"ArrowUp"===e.key?(e.preventDefault(),n=(n-1+t.length)%t.length,t[n].focus()):"Enter"===e.key&&(e.preventDefault(),a.click())})),document.addEventListener("mousemove",(()=>{clearTimeout(c),c=setTimeout((()=>{o.clearSearch.style.display=o.searchBox.value?"block":"none",o.clearPrompt.style.display=o.promptArea.value?"block":"none"}),50)}))}))})();