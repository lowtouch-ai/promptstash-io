(()=>{function e(){const e="promptstash-sidebar";let t=document.getElementById(e);t?t.remove():(t=document.createElement("div"),t.id=e,t.innerHTML=`\n      <iframe src="${chrome.runtime.getURL("popup.html")}" style="width: 100%; height: 100%; border: none;"></iframe>\n    `,document.body.appendChild(t),t.style.width="50%",t.style.height="100%",t.style.position="fixed",t.style.top="0",t.style.right="0",t.style.zIndex="10000",t.style.backgroundColor="#171717",t.style.borderLeft="1px solid #888888",t.style.resize="horizontal",t.style.overflow="auto")}chrome.action.onClicked.addListener((t=>{t.url.startsWith("chrome://")?console.error("Cannot inject into chrome:// URLs"):chrome.scripting.executeScript({target:{tabId:t.id},function:e})})),chrome.runtime.onInstalled.addListener((()=>{chrome.contextMenus.create({id:"saveToPromptStash",title:"Save to PromptStash",contexts:["selection"]})})),chrome.contextMenus.onClicked.addListener(((e,t)=>{"saveToPromptStash"===e.menuItemId&&chrome.tabs.sendMessage(t.id,{action:"getSelectedText"},(e=>{e&&e.selectedText&&chrome.storage.sync.get(["templates"],(t=>{const o=t.templates||[];o.push({name:`New Template ${o.length+1}`,tags:"",content:e.selectedText,type:"custom"}),chrome.storage.sync.set({templates:o})}))}))}))})();