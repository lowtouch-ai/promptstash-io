<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PromptStash by lowtouch.ai</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body class="light">
  <div class="position-absolute top-0 end-0 d-flex align-items-center m-0 py-0 px-2" style="gap: 0.3rem;">
    <button id="themeToggle" class="topbtn m-0" aria-label="Toggle theme" data-bs-toggle="tooltip" data-bs-placement="top" title="Toggle theme">
      <svg width="15" height="15"><use href="sprite.svg#theme"></use></svg>
    </button>
    <button id="minimizeBtn" class="topbtn m-0" aria-label="Minimize popup">
      <svg width="10" height="10"><use href="sprite.svg#minimize"></use></svg>
    </button>
    <button id="fullscreenToggle" class="topbtn m-0" aria-label="Enter fullscreen">
      <svg width="10" height="10"><use href="sprite.svg#fullscreen"></use></svg>
    </button>
    <button id="closeBtn" class="topbtn m-0" aria-label="Close popup">
      <svg width="10" height="10"><use href="sprite.svg#close"></use></svg>
    </button>
  </div>
  <header class="d-flex justify-content-center align-items-center ms-2 mb-2 position-relative">
    <a href="https://www.lowtouch.ai/" target="_blank" aria-label="Visit lowtouch.ai">
      <img src="icon128.png" alt="lowtouch.ai logo" class="logo shadow rounded-pill" data-bs-toggle="tooltip" data-bs-placement="top" title="Visit lowtouch.ai">
    </a>
    <div class="h1 mt-2 ms-3 d-flex">
      <a href="https://promptstash.io/" target="_blank" class="title text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="Visit PromptStash">PromptStash</a>
    </div>
    <div class="mt-2 d-flex">
      <span class="title">&nbsp;by&nbsp;</span>
      <a href="https://www.lowtouch.ai/" target="_blank" class="title text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="Visit lowtouch.ai">lowtouch.ai</a>
    </div>
  </header>

  <div class="search-select w-100 position-relative">
    <div class="input-group position-relative d-flex gap-2">
      <span id="searchIcon" class="position-absolute mx-2 p-0" style="pointer-events: none; z-index: 10;" aria-hidden="true" data-bs-toggle="tooltip" data-bs-placement="top" title="Search templates">
        <svg width="15" height="15"><use href="sprite.svg#search"></use></svg>
      </span>
      <input type="text" id="searchBox" class="form-control rounded-2 py-2" placeholder="Search by name or tags" aria-label="Search templates" data-bs-toggle="tooltip" data-bs-placement="top" title="Search templates">
      <button id="clearSearch" class="clrbtn rounded-pill position-absolute top-50 translate-middle-y end-0" style="z-index: 11; display: none;" aria-label="Clear search" data-bs-toggle="tooltip" data-bs-placement="top" title="Clear search">
        <svg width="13" height="13"><use href="sprite.svg#clear"></use></svg>
      </button>
      <button id="newBtn" class="topbtn m-0" aria-label="Toggle theme" data-bs-toggle="tooltip" data-bs-placement="top" title="New template">
        <svg width="30" height="30"><use href="sprite.svg#new"></use></svg>
      </button>    
       <!-- Import and Export top right icons -->
       <button
       id="importBtn"
       class="topbtn m-0"
       aria-label="Import prompts"
       data-bs-toggle="tooltip"
       data-bs-placement="top"
       title="Import prompts"
     >
       <svg width="25" height="25"><use href="sprite.svg#import"></use></svg>
      </button>
      <button
        id="exportAllBtn"
        class="topbtn m-0"
        aria-label="Export all prompts"
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Export all prompts"
      >
        <svg width="25" height="25"><use href="sprite.svg#export"></use></svg>
      </button>
    </div>
     <!-- import file picker -->
     <input
     type="file"
     id="importFileInput"
     accept=".yaml,.yml"
     style="display: none"
   />
    <div id="dropdownResults" class="dropdown mt-0" style="z-index: 10000; display: none;" role="listbox" aria-label="Template search results"></div>
    <div class="d-flex w-100 position-relative">
      <div id="favoriteSuggestions" class="d-none rounded-2 m-0 mt-2 mb-0" role="list" aria-label="Favorite template suggestions"></div>
      <div id="favoriteSuggestionsHide" class="rounded-2 m-1"></div>
    </div>
  </div>
  <div id="template" class="p-0 mt-0 gap-2">
    <div class="position-relative">
      <input type="text" id="templateName" class="form-control rounded-2 px-3 py-2" placeholder="Template Name" aria-label="Template name">
      <!-- Single template export icon -->
      <button
      id="exportSingleBtn"
      class="topbtn position-absolute end-0 top-50 translate-middle-y me-2"
      style="z-index: 2"
      aria-label="Export this template"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      data-bs-original-title="Export this template"
      type="button"
      disabled
    >
      <svg width="20" height="20"><use href="sprite.svg#export"></use></svg>
    </button>
    </div>
    <div class="position-relative">
      <span id="tags-label" class="position-absolute ps-3" aria-hidden="true"> Tags:</span>
      <input type="text" id="templateTags" class="form-control rounded-2 pe-3 py-2" placeholder="(comma-separated)" aria-label="Template tags">
        <!-- The display that LOOKS like text but is clickable. Starts hidden. -->
        <div
        id="tagsDisplay"
        class="form-control tags-display-view hidden"
      ></div>

      <!-- A simple icon to switch back to editing mode. Starts hidden. -->
      <button
        id="editTagsBtn"
        class="edit-tags-btn hidden"
        aria-label="Edit tags"
      >
        &#9998;
      </button>
    </div>
    <div class="position-relative">
      <textarea id="promptArea" class="form-control rounded-2 px-3 py-2" placeholder="Edit your prompt here..." style="resize: none;" aria-label="Prompt text"></textarea>
      <button id="clearPrompt" class="clrbtn position-absolute top-0 end-0" style="display: none;" aria-label="Clear prompt text" data-bs-toggle="tooltip" data-bs-placement="top" title="Clear prompt text">
        <svg width="15" height="15"><use href="sprite.svg#clear"></use></svg>
      </button>
      <button id="fetchBtn2" class="btn btn-sm rounded-3 position-absolute top-50 start-50 translate-middle" aria-label="Fetch from website">Fetch prompt from chat</button>
    </div>
  </div>

  <div id="buttons" class="d-flex column justify-content-center flex-wrap py-1 mt-2 mb-2">
    <div class="d-flex flex-column align-items-center">
      <button id="fetchBtn" class="btn rounded-pill" aria-label="Fetch prompt from chat" data-bs-toggle="tooltip" data-bs-placement="top" title="Fetch prompt from chat">
        <svg><use href="sprite.svg#fetch"></use></svg>
      </button>
      <span class="btn-label mt-0">Fetch</span>
    </div>
    <div class="d-flex flex-column align-items-center">
      <button id="saveBtn" class="btn rounded-pill" aria-label="Save changes to this template" data-bs-toggle="tooltip" data-bs-placement="top" title="Save changes to this template">
        <svg><use href="sprite.svg#save"></use></svg>
      </button>
      <span class="btn-label mt-0">Save</span>
    </div>
    <div class="d-flex flex-column align-items-center">
      <button id="saveAsBtn" class="btn rounded-pill" aria-label="Save as new template" data-bs-toggle="tooltip" data-bs-placement="top" title="Save as new template">
        <svg><use href="sprite.svg#saveAs"></use></svg>
      </button>
      <span class="btn-label mt-0">Save as</span>
    </div>
    <div class="d-flex flex-column align-items-center">
      <button id="sendBtn" class="btn rounded-pill" aria-label="Load prompt to chat" data-bs-toggle="tooltip" data-bs-placement="top" title="Send prompt to chat">
        <svg><use href="sprite.svg#send"></use></svg>
      </button>
      <span class="btn-label mt-0">Send</span>
    </div>
    <div class="d-flex flex-column align-items-center">
      <button id="deleteBtn" class="btn rounded-pill" aria-label="Delete this template" data-bs-toggle="tooltip" data-bs-placement="top" title="Delete this template">
        <svg><use href="sprite.svg#delete"></use></svg>
      </button>
      <span class="btn-label mt-0">Delete</span>
    </div>
    <div class="d-flex flex-column align-items-center">
      <button id="clearAllBtn" class="btn rounded-pill" aria-label="Clear all fields" data-bs-toggle="tooltip" data-bs-placement="top" title="Clear all">
        <svg><use href="sprite.svg#clearAll"></use></svg>
      </button>
      <span class="btn-label mt-0">Clear all</span>
    </div>
  </div>

  <div class="position-absolute top-0 start-0" id="searchOverlay" style="width: 100%; height: 100%; background: inherit; z-index: 0; display: none;"></div>
  <div class="position-absolute top-0 start-0" id="toastOverlay" style="width: 100%; height: 100%; background: inherit; opacity: 0.2; z-index: 9999; display: none;"></div>
  <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"></div>

  <script src="bootstrap.bundle.min.js"></script>
  <script type="module" src="popup.js"></script>
</body>
</html>