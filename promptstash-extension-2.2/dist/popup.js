(()=>{const e=[{name:"Business Analyst Report",tags:"analysis, report, business",content:"Your Role: Business Analyst\nYour Task: Analyze the provided data and generate a concise report.\nRelevant Background Information: Use formal tone, focus on key metrics.\nOutput Format: Executive summary (200 words), followed by bullet points.",type:"pre-built"},{name:"Code Debugging Assistant",tags:"coding, debug, tech",content:"Your Role: Senior Developer\nYour Task: Identify and fix bugs in the provided code snippet.\nRelevant Background Information: Code is in Python, prioritize efficiency.\nOutput Format: Explanation of issue, corrected code block.",type:"pre-built"},{name:"Content Generator",tags:"marketing, content, quick",content:"Your Role: Content Writer\nYour Task: Write a 500-word blog post on the given topic.\nRelevant Background Information: Casual tone, SEO-friendly.\nOutput Format: Title, intro, 3 sections, conclusion.",type:"pre-built"}];document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("templateSelect"),n=document.getElementById("promptArea"),o=document.getElementById("templateName"),a=document.getElementById("templateTags"),s=document.getElementById("searchBox"),c=document.getElementById("dropdownResults"),r=document.getElementById("filterSelect"),l=document.getElementById("fetchBtn"),i=document.getElementById("saveBtn"),m=document.getElementById("saveAsBtn"),d=document.getElementById("sendBtn");function u(n){chrome.storage.sync.get(["templates"],(o=>{const a=o.templates||e;t.innerHTML="<option value=''>Select a template</option>",a.forEach(((e,o)=>{if("all"===n||e.type===n){const n=document.createElement("option");n.value=o,n.text=`${e.name} (${e.tags})`,t.appendChild(n)}}))}))}t.parentNode.insertBefore(r,t),u("all"),r.addEventListener("change",(()=>{u(r.value)})),t.addEventListener("change",(()=>{chrome.storage.sync.get(["templates"],(s=>{const c=(s.templates||e)[t.value];c&&(o.value=c.name,a.value=c.tags,n.value=c.content)}))})),i.addEventListener("click",(function(){const s=t.value;""!==s?confirm("Are you sure you want to overwrite the existing template?")&&chrome.storage.sync.get(["templates"],(t=>{const c=t.templates||e;c[s]={name:o.value,tags:a.value,content:n.value,type:"custom"},chrome.storage.sync.set({templates:c},(()=>{alert("Template saved successfully.")}))})):alert("Please select a template to save changes.")})),m.addEventListener("click",(()=>{chrome.storage.sync.get(["templates"],(t=>{const s=t.templates||e;s.push({name:o.value,tags:a.value,content:n.value,type:"custom"}),chrome.storage.sync.set({templates:s},(()=>{location.reload()}))}))})),l.addEventListener("click",(()=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{chrome.tabs.sendMessage(e[0].id,{action:"getPrompt"},(e=>{e&&e.prompt&&(n.value=e.prompt)}))}))})),s.addEventListener("input",(()=>{const t=s.value.toLowerCase();chrome.storage.sync.get(["templates"],(s=>{const r=s.templates||e;c.innerHTML="",r.filter((e=>e.name.toLowerCase().includes(t)||e.tags.toLowerCase().includes(t))).forEach((e=>{const t=document.createElement("div");t.textContent=`${e.name} (${e.tags})`,t.addEventListener("click",(()=>{o.value=e.name,a.value=e.tags,n.value=e.content,c.innerHTML=""})),c.appendChild(t)}))}))})),d.addEventListener("click",(()=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{chrome.tabs.sendMessage(e[0].id,{action:"sendPrompt",prompt:n.value})}))}))}))})();